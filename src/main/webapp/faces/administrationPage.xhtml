<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title>Administration</title>
    <h:outputStylesheet library="css" name="accueilCss.css"/>
</h:head>
<h:body>
    <div class="navbar">
        <h:graphicImage name="images/logo-api.svg" style="width:100px; height:auto; margin-bottom:20px;"/>
        <h1>Administration des utilisateurs</h1>
        <div class="navbar-buttons">
            <p:commandButton value="Accueil" action="accueil?faces-redirect=true" styleClass="navbar-button" />
        </div>
    </div>
<div class="adminBoard" style="margin-top:100px">
    <h:form id="adminForm">

        <p:dataTable var="user" value="#{adminBean.users}" id="usersTable" styleClass="users-table"
                     emptyMessage="Aucun utilisateur trouvÃ©" paginator="true" rows="10" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}  {RowsPerPageDropdown}" lazy="false">
            <p:column headerText="Pseudo">
                <h:outputText value="#{user.username}" />
            </p:column>
            <p:column headerText="Email">
                <h:outputText value="#{user.email}" />
            </p:column>
            <p:column headerText="Statut">
                <h:outputText value="#{user.statut}" />
            </p:column>
            <p:column headerText="Actions">
                <h:panelGroup>
                    <p:commandButton value="Activer" rendered="#{user.statut == 'inactif'}"
                                     action="#{adminBean.activateUser(user.username)}" update=":adminForm:usersTable" styleClass="admin-button"/>
                    <p:commandButton value="DÃ©sactiver" rendered="#{user.statut == 'actif'}"
                                     action="#{adminBean.disableUser(user.username)}" update=":adminForm:usersTable" styleClass="admin-button"/>
                    <p:commandButton value="Supprimer" action="#{adminBean.deleteUser(user.username)}"
                                     update=":adminForm:usersTable" styleClass="admin-button delete-button"/>
                </h:panelGroup>
            </p:column>
        </p:dataTable>
    </h:form>
</div>
</h:body>
</html>
